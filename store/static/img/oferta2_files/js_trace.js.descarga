const errorsHistory=[];function abortErrorReport(message,file,line,column,error){if(!errorLoggingEnabled)return true;if(errorsHistory.length>10)return true;if(errorsHistory.includes(message))return true;errorsHistory.push(message);if(window.performance.now()>36e5)return true;return false;}
function myOnErrorHandler(message,file,line,column,error){if(typeof error=='undefined'){error={};}
if(typeof error.stack=='undefined'){error.stack='';}
if(typeof error.name=='undefined'){error.name='';}
const record={message,file,line,column,stack:error.stack,name:error.name,};record.metadata={url:document.location.href,referrer:document.referrer,cookie:navigator.cookieEnabled?document.cookie:'disabled',language:navigator.language,connection:navigator.connection.effectiveType,hasFocus:document.hasFocus(),readyState:document.readyState,secondsIn:Math.round(performance.now()/1000),heap:Math.round(performance.memory.usedJSHeapSize/1048576),heapPercent:Math.round(performance.memory.usedJSHeapSize/performance.memory.jsHeapSizeLimit*100),};var xhr=new XMLHttpRequest();xhr.open('post','/service?action=js_trace',true);xhr.setRequestHeader('Content-Type','application/json; charset=UTF-8');xhr.send(JSON.stringify(record));xhr.onloadend=function(){};console.log(record);};const warningsHistory=[];var originalConsoleWarn=console.warn;console.warn=function(message){warningsHistory.push(message);originalConsoleWarn(message);};const{onerror}=window;window.onerror=(message,file,line,column,error)=>{myOnErrorHandler(message,file,line,column,error);onerror&&onerror.apply(window,args);return false;}